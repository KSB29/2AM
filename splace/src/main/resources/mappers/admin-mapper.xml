<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminMapper">
	<resultMap type="Account" id="accountResultSet">
		<id property="accountId" column="ACCOUNT_ID"/>
		<result property="accountStart" column="ACCOUNT_START"/>
		<result property="accountEnd" column="ACCOUNT_END"/>
		<result property="accountTotal" column="ACCOUNT_TOTAL"/>
		<result property="accountFee" column="ACCOUNT_FEE"/>
		<result property="accountPrice" column="ACCOUNT_PRICE"/>
		<result property="hoshId" column="HOSH_ID"/>
	</resultMap>
	<resultMap id="memberResultSet" type="Member">
		<id property="memberId" column="MEMBER_ID"/>
		<result property="memberPwd" column="MEMBER_PWD"/>
		<result property="memberName" column="MEMBER_NAME"/>
		<result property="memberPhone" column="MEMBER_PHONE"/>
		<result property="memberAgree" column="MEMBER_AGREE"/>
		<result property="memberEnroll" column="MEMBER_ENROLL"/>
		<result property="memberUpdate" column="MEMBER_UPDATE"/>
		<result property="memberSocial" column="MEMBER_SOCIAL"/>
		<result property="grade" column="GRADE"/>
		<result property="memberStatus" column="MEMBER_STATUS"/>
	</resultMap>
	<resultMap type="Host" id="hostResultSet">
		<id property="hostId" column="HOST_ID"/>
		<result property="hostPhone" column="HOST_PHONE"/>
		<result property="hostEmail" column="HOST_EMAIL"/>
		<result property="hostName" column="HOST_NAME"/>
		<result property="storeName" column="STORE_NAME"/>
		<result property="hostNo" column="HOST_NO"/>
		<result property="hostBank" column="HOST_BANK"/>
		<result property="hostAccount" column="HOST_ACCOUNT"/>
		<result property="hostBname" column="HOST_BNAME"/>
		<result property="hostEnroll" column="HOST_ENROLL"/>
		<result property="hostUpdate" column="HOST_UPDATE"/>
		<result property="memberId" column="MEMBER_ID"/>
		<result property="statusId" column="STATUS_ID"/>
	</resultMap>
	<resultMap type="Space" id="spaceResultSet">
		<id property="spaceId" column="SPACE_ID"/>
		<result property="spaceName" column="SPACE_NAME"/>
		<result property="spaceComment" column="SPACE_COMMENT"/>
		<result property="spaceDetail" column="SPACE_DETAIL" jdbcType="CLOB" javaType="java.lang.String"/>
		<result property="spaceTag" column="SPACE_TAG"/>
		<result property="spaceOption" column="SPACE_OPTION"/>
		<result property="spaceAddress" column="SPACE_ADDRESS"/>
		<result property="spacePhone" column="SPACE_PHONE"/>
		<result property="spaceNotice" column="SPACE_NOTICE"/>
		<result property="spaceOperStatus" column="SPACE_OPER_STATUS"/>
		<result property="spaceTime" column="SPACE_TIME"/>
		<result property="spaceMinPer" column="SPACE_MIN_PER"/>
		<result property="spaceMaxPer" column="SPACE_MAX_PER"/>
		<result property="spaceAdd" column="SPACE_ADD"/>
		<result property="spaceOpenTime" column="SPACE_OPEN_TIME"/>
		<result property="spaceCloseTime" column="SPACE_CLOSE_TIME"/>
		<result property="hostId" column="HOST_ID"/>
		<result property="memberId" column="MEMBER_ID"/>
		<result property="typeId" column="TYPE_ID"/>
		<result property="statusId" column="STATUS_ID"/>
		<result property="spaceEnroll" column="SPACE_ENROLL"/>
		<result property="spaceUpdate" column="SPACE_UPDATE"/>
	</resultMap>
	<resultMap type="Board" id="boardResultSet">
		<id property="boardId" column="BOARD_ID"/>
		<result property="boardTitle" column="BOARD_TITLE"/>
		<result property="boardContent" column="BOARD_CONTENT"/>
		<result property="boardStatus" column="BOARD_STATUS"/>
		<result property="boardEnroll" column="BOARD_ENROLL"/>
		<result property="boardUpdate" column="BOARD_UPDATE"/>
	</resultMap>
	<resultMap type="Board" id="faqResultSet">
		<id property="boardId" column="FAQ_ID"/>
		<result property="boardType" column="FAQ_TYPE"/>
		<result property="boardTitle" column="FAQ_TITLE"/>
		<result property="boardContent" column="FAQ_CONTENT"/>
		<result property="boardStatus" column="FAQ_STATUS"/>
		<result property="boardEnroll" column="FAQ_ENROLL"/>
		<result property="boardUpdate" column="FAQ_UPDATE"/>
	</resultMap>
   <resultMap type="QnA" id="QnAResultSet">
      <id property="qnaId" column="QNA_ID"/>
      <result property="qContent" column="Q_CONTENT"/>
      <result property="qDate" column="Q_DATE"/>
      <result property="aContent" column="A_CONTENT"/>
      <result property="aDate" column="A_DATE"/>
      <result property="qType" column="Q_TYPE"/>
      <result property="qStatus" column="Q_STATUS"/>
      <result property="qMemberId" column="Q_MEMBER_ID"/>
      <result property="aMemberId" column="A_MEMBER_ID"/>
      <result property="spaceId" column="SPACE_ID"/>
   </resultMap>

	<!-- 1. 정산관리 -->
	<select id="selectAccountList" parameterType="_int" resultMap="accountResultSet">
		SELECT * 
		FROM ACCOUNT
		<if test="_parameter != 0">
			WHERE EXTRACT(MONTH FROM ACCOUNT_START) = #{month}
		</if>
	</select>
	
	<!-- 2. 회원관리 -->
	<select id="selectMemberList" parameterType="string" resultMap="memberResultSet">
		SELECT * FROM MEMBER
		WHERE MEMBER_STATUS = #{memberStatus}
	</select>
	
	<!-- 3. 호스트관리 -->
	<select id="selectHostList" parameterType="_int" resultMap="hostResultSet">
		SELECT * FROM HOST
		<if test="_parameter != 4">
			WHERE STATUS_ID = #{status}
		</if>
	</select>
	
	<!-- 4. faq관리 -->
	<select id="selectFaqList" resultMap="faqResultSet" parameterType="_int">
		SELECT * FROM FAQ 
		<if test="_parameter != 100">
			WHERE FAQ_TYPE = #{status}
		</if>
	</select>
	
	<!-- 5. 공지사항관리 -->
	<select id="selectNoticeList" resultMap="boardResultSet">
		SELECT * FROM BOARD
	</select>
	
	<!-- 6. 호스트문의관리 -->
	<select id="selectQlist" resultMap="QnAResultSet">
		SELECT QNA_ID, Q_CONTENT, Q_DATE, A_CONTENT, A_DATE, Q_STATUS, Q_MEMBER_ID, A_MEMBER_ID, SPACE_ID
		FROM QNA
		WHERE Q_TYPE = 0
	</select>
	
	<!-- 7. 관리자문의관리 -->
	<select id="selectQAdminlist" resultMap="QnAResultSet">
		SELECT QNA_ID, Q_CONTENT, Q_DATE, A_CONTENT, A_DATE, Q_STATUS, Q_MEMBER_ID, A_MEMBER_ID
		FROM QNA
		WHERE Q_TYPE = 1
	</select>
	
	<!-- 호스트 승인 처리 -->
	<update id="updateApproveHost" parameterType="_int">
		UPDATE HOST
		SET    STATUS_ID = 2, HOST_UPDATE = SYSDATE
		WHERE  HOST_ID = #{hostId}
	</update>
	
	<!-- 호스트 반려 처리 -->
	<update id="updateCancelHost" parameterType="_int">
		UPDATE HOST
		SET    STATUS_ID = 3, HOST_UPDATE = SYSDATE
		WHERE  HOST_ID = #{hostId}
	</update>
	
	<!-- 공간 관리 -->
	<select id="selectSpaceList" parameterType="_int" resultMap="spaceResultSet">
		SELECT S.*, H.MEMBER_ID FROM SPACE S, HOST H
		WHERE  S.HOST_ID = H.HOST_ID
		<if test="_parameter != 4">
			AND S.STATUS_ID = #{status}
		</if>
	</select>
	
	<!-- 공간 승인 처리 -->
	<update id="updateApproveSpace" parameterType="_int">
		UPDATE SPACE
		SET    STATUS_ID = 2, SPACE_UPDATE = SYSDATE
		WHERE  SPACE_ID = #{spaceId}
	</update>
	
	<!-- 공간 반려 처리 -->
	<update id="updateCancelSpace" parameterType="_int">
		UPDATE SPACE
		SET    STATUS_ID = 3, SPACE_UPDATE = SYSDATE
		WHERE  SPACE_ID = #{spaceId}
	</update>
	
</mapper>
